var __reflect=this&&this.__reflect||function(e,t,s){e.__class__=t,s?s.push(t):s=[t],e.__types__=e.__types__?s.concat(e.__types__):s},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),EventManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==this.gInstance&&(this.gInstance=new t),this.gInstance},t}(egret.EventDispatcher);__reflect(EventManager.prototype,"EventManager");var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),EventManager.getInstance().addEventListener(DataEvent.EVENT_SHOW_GAME,this.onShowGame,this),EventManager.getInstance().addEventListener(DataEvent.EVENT_SHOW_START,this.onShowStart,this),EventManager.getInstance().addEventListener(DataEvent.EVENT_SHOW_START_MOVIE,this.onShowStartMovie,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},t.prototype.onRemoveFromStage=function(e){EventManager.getInstance().removeEventListener(DataEvent.EVENT_SHOW_GAME,this.onShowGame,this),EventManager.getInstance().removeEventListener(DataEvent.EVENT_SHOW_START,this.onShowStart,this),EventManager.getInstance().removeEventListener(DataEvent.EVENT_SHOW_START_MOVIE,this.onShowStartMovie,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),ConfigManager.getInstance().ParseConfig(),this.switchScene(1))},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName},t.prototype.onShowStart=function(e){this.switchScene(1)},t.prototype.onShowGame=function(e){this.switchScene(2)},t.prototype.onShowStartMovie=function(e){this.switchScene(3)},t.prototype.switchScene=function(e){switch(this._stStartPanel&&this._stStartPanel.parent&&this._stStartPanel.parent.removeChild(this._stStartPanel),this._stGamePanel&&this._stGamePanel.parent&&this._stGamePanel.parent.removeChild(this._stGamePanel),this._stMoviePanel&&this._stMoviePanel.parent&&this._stMoviePanel.parent.removeChild(this._stMoviePanel),e){case 1:null==this._stStartPanel&&(this._stStartPanel=new StartPanel),this.addChild(this._stStartPanel);break;case 2:null==this._stGamePanel&&(this._stGamePanel=new GamePanel),this.addChild(this._stGamePanel);break;case 3:null==this._stMoviePanel&&(this._stMoviePanel=new MoviePanel),this.addChild(this._stMoviePanel)}},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var MyButton=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.touchEnabled=!0,t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onRemoveFromStage=function(e){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.Clear()},t.prototype.SetResource=function(e,t,s){this._bmpBg||(this._bmpBg=new egret.Bitmap),this._textureUp=RES.getRes(e),this._textureDown=RES.getRes(t),this._listener=s,this._bmpBg.texture=this._textureUp,this.addChild(this._bmpBg)},t.prototype.onTouch=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this._bmpBg.texture=this._textureDown;break;case egret.TouchEvent.TOUCH_END:this._bmpBg.texture=this._textureUp}},t.prototype.onTouchMove=function(e){e.localX>20&&e.localX<243&&e.localY>20&&e.localY<71?this._bmpBg.texture=this._textureDown:this._bmpBg.texture=this._textureUp},t.prototype.onTouchTap=function(e){this._listener(e)},t.prototype.Clear=function(){this._bmpBg=null,this._textureUp=null,this._textureDown=null,this._listener=null},t}(egret.DisplayObjectContainer);__reflect(MyButton.prototype,"MyButton");var ConfigManager=function(e){function t(){var t=e.call(this)||this;return t._arrBorn=new Array,t}return __extends(t,e),t.getInstance=function(){return null==this.gInstance&&(this.gInstance=new t),this.gInstance},t.prototype.ParseConfig=function(){var e=RES.getRes("config_born_json");this._arrBorn=e.born},t}(egret.DisplayObject);__reflect(ConfigManager.prototype,"ConfigManager");var DataEvent=function(e){function t(t,s,i){return void 0===s&&(s=!1),void 0===i&&(i=!1),e.call(this,t,s,i)||this}return __extends(t,e),t.EVENT_SHOW_GAME="EVENT_SHOW_GAME",t.EVENT_SHOW_START="EVENT_SHOW_START",t.EVENT_SHOW_START_MOVIE="EVENT_SHOW_START_MOVIE",t}(egret.Event);__reflect(DataEvent.prototype,"DataEvent");var GameConst=function(){function e(){}return e.NOTE_FLY_TIME=1e3,e.PERFECT_SCORE=200,e.GREAT_SCORE=80,e.DOUBLE_SCORE_NUM=450,e.TRIPLE_SCORE_NUM=800,e.QUADRUPLE_SCORE_NUM=1300,e}();__reflect(GameConst.prototype,"GameConst");var NoteItem=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.AddNote(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},t.prototype.onRemoveFromStage=function(e){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.Clear()},Object.defineProperty(t.prototype,"nKey",{get:function(){return 100*this._nTime+10*this._nPathWay+1*this._nType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nNoteType",{get:function(){return 10*this._nPathWay+1*this._nType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nPathWay",{get:function(){return this._nPathWay},enumerable:!0,configurable:!0}),t.prototype.SetNoteStyle=function(e,t,s){this._nTime=e,this._nPathWay=t,this._nType=s},t.prototype.AddNote=function(){this._bmpNote||(this._bmpNote=new egret.Bitmap);var e;switch(this.nNoteType){case 10:e=RES.getRes("image_keyStart11_png");break;case 11:e=RES.getRes("image_keyStart12_png");break;case 12:e=RES.getRes("image_keyMiddle1_png");break;case 13:e=RES.getRes("image_keyend1_png");break;case 20:e=RES.getRes("image_keyStart21_png");break;case 21:e=RES.getRes("image_keyStart22_png");break;case 22:e=RES.getRes("image_keyMiddle2_png");break;case 23:e=RES.getRes("image_keyend2_png");break;case 30:e=RES.getRes("image_keyStart31_png");break;case 31:e=RES.getRes("image_keyStart32_png");break;case 32:e=RES.getRes("image_keyMiddle3_png");break;case 33:e=RES.getRes("image_keyend3_png");break;case 40:e=RES.getRes("image_keyStart41_png");break;case 41:e=RES.getRes("image_keyStart42_png");break;case 42:e=RES.getRes("image_keyMiddle4_png");break;case 43:e=RES.getRes("image_keyend4_png")}this._bmpNote.texture=e,this.addChild(this._bmpNote)},t.prototype.Clear=function(){this._bmpNote=null},t}(egret.DisplayObjectContainer);__reflect(NoteItem.prototype,"NoteItem");var NoteManager=function(e){function t(){var t=e.call(this)||this;return t._objCache=new egret.HashObject,t._objShow=new egret.HashObject,t}return __extends(t,e),t.getInstance=function(){return null==this.gInstance&&(this.gInstance=new t),this.gInstance},Object.defineProperty(t.prototype,"objShow",{get:function(){return this._objShow},enumerable:!0,configurable:!0}),t.prototype.GetNote=function(e,t,s){var i,r,h=10*t+1*s;return this._objCache[h]?r=this._objCache[h]:(r=new Array,this._objCache[h]=r),i=r.length>0?r.shift():new NoteItem,i.SetNoteStyle(e,t,s),this.ShowNote(i),i},t.prototype.ReturnNote=function(e){var t=this._objCache[e.nNoteType];t&&(egret.Tween.removeTweens(e),t.push(e))},t.prototype.ShowNote=function(e){var t;this._objShow[e.nNoteType]?t=this._objShow[e.nNoteType]:(t=new Array,this._objShow[e.nNoteType]=t),t.push(e)},t.prototype.HideNote=function(e){var t=this._objShow[e.nNoteType];if(t){for(var s=0;s<t.length;++s){var i=t[s];if(i.nKey==e.nKey){t.splice(s,1),this.ReturnNote(e);break}}e&&e.parent&&e.parent.removeChild(e)}},t.prototype.HideAllNote=function(){var e;for(e in this._objShow)for(var t=this._objShow[e],s=0;s<t.length;++s){var i=t[s];i&&i.parent&&(egret.Tween.removeTweens(i),i.parent.removeChild(i))}this._objCache=new egret.HashObject,this._objShow=new egret.HashObject},t}(egret.DisplayObject);__reflect(NoteManager.prototype,"NoteManager");var GamePanel=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.touchEnabled=!0,t}return __extends(t,e),t.prototype.onAddToStage=function(e){var t=this;this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onGameTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onGameTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onGameTouchMove,this),document.addEventListener("keydown",function(e){t.OnKeyDown(e)}),document.addEventListener("keyup",function(e){t.OnKeyUp(e)}),this.InitData(),this.UpdateShow()},t.prototype.onRemoveFromStage=function(e){var t=this;this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onGameTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onGameTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onGameTouchMove,this),document.removeEventListener("keydown",function(e){t.OnKeyDown(e)}),document.removeEventListener("keyup",function(e){t.OnKeyUp(e)}),this.Clear()},t.prototype.InitData=function(){this._nCurCombo=0,this._nScore=0,this._nScoreRate=1,this._nPerNum=0,this._nGameTime=0,this._nTimeFlag=0,this._nNoteIndex=0,this._bPerDown1=!1,this._bPerDown2=!1,this._bPerDown3=!1,this._bPerDown4=!1},t.prototype.UpdateShow=function(){this._LayerScene||(this._LayerScene=new egret.DisplayObjectContainer),this.addChild(this._LayerScene),this._LayerNote||(this._LayerNote=new egret.DisplayObjectContainer),this.addChild(this._LayerNote),this._LayerUI||(this._LayerUI=new egret.DisplayObjectContainer),this.addChild(this._LayerUI),this._bmpBg||(this._bmpBg=new egret.Bitmap);var e=RES.getRes("image_gameBg_jpg");this._bmpBg.texture=e,this._LayerScene.addChild(this._bmpBg),this._bmpPerBg||(this._bmpPerBg=new egret.Bitmap);var t=RES.getRes("image_perBg_png");this._bmpPerBg.texture=t,this._bmpPerBg.y=this.stage.stageHeight-543,this._LayerScene.addChild(this._bmpPerBg),this._shapePerDown1||(this._shapePerDown1=new egret.Shape),this._shapePerDown1.graphics.lineStyle(1,1,1),this._shapePerDown1.graphics.beginFill(3394815,.5),this._shapePerDown1.graphics.moveTo(5*this.stage.stageWidth/12,27*this.stage.stageHeight/128),this._shapePerDown1.graphics.lineTo(17*this.stage.stageWidth/192,103*this.stage.stageHeight/128),this._shapePerDown1.graphics.lineTo(55*this.stage.stageWidth/192,103*this.stage.stageHeight/128),this._shapePerDown1.graphics.lineTo(11*this.stage.stageWidth/24,27*this.stage.stageHeight/128),this._shapePerDown1.graphics.lineTo(5*this.stage.stageWidth/12,27*this.stage.stageHeight/128),this._shapePerDown1.graphics.endFill(),this._LayerScene.addChild(this._shapePerDown1),this._shapePerDown1.visible=!1,this._shapePerDown2||(this._shapePerDown2=new egret.Shape),this._shapePerDown2.graphics.lineStyle(1,1,1),this._shapePerDown2.graphics.beginFill(3394815,.5),this._shapePerDown2.graphics.moveTo(11*this.stage.stageWidth/24,27*this.stage.stageHeight/128),this._shapePerDown2.graphics.lineTo(55*this.stage.stageWidth/192,103*this.stage.stageHeight/128),this._shapePerDown2.graphics.lineTo(this.stage.stageWidth/2,103*this.stage.stageHeight/128),this._shapePerDown2.graphics.lineTo(this.stage.stageWidth/2,27*this.stage.stageHeight/128),this._shapePerDown2.graphics.lineTo(11*this.stage.stageWidth/24,27*this.stage.stageHeight/128),this._shapePerDown2.graphics.endFill(),this._LayerScene.addChild(this._shapePerDown2),this._shapePerDown2.visible=!1,this._shapePerDown3||(this._shapePerDown3=new egret.Shape),this._shapePerDown3.graphics.lineStyle(1,1,1),this._shapePerDown3.graphics.beginFill(3394815,.5),this._shapePerDown3.graphics.moveTo(this.stage.stageWidth/2,27*this.stage.stageHeight/128),this._shapePerDown3.graphics.lineTo(this.stage.stageWidth/2,103*this.stage.stageHeight/128),this._shapePerDown3.graphics.lineTo(137*this.stage.stageWidth/192,103*this.stage.stageHeight/128),this._shapePerDown3.graphics.lineTo(13*this.stage.stageWidth/24,27*this.stage.stageHeight/128),this._shapePerDown3.graphics.lineTo(this.stage.stageWidth/2,27*this.stage.stageHeight/128),this._shapePerDown3.graphics.endFill(),this._LayerScene.addChild(this._shapePerDown3),this._shapePerDown3.visible=!1,this._shapePerDown4||(this._shapePerDown4=new egret.Shape),this._shapePerDown4.graphics.lineStyle(1,1,1),this._shapePerDown4.graphics.beginFill(3394815,.5),this._shapePerDown4.graphics.moveTo(13*this.stage.stageWidth/24,27*this.stage.stageHeight/128),this._shapePerDown4.graphics.lineTo(137*this.stage.stageWidth/192,103*this.stage.stageHeight/128),this._shapePerDown4.graphics.lineTo(176*this.stage.stageWidth/192,103*this.stage.stageHeight/128),this._shapePerDown4.graphics.lineTo(113*this.stage.stageWidth/192,27*this.stage.stageHeight/128),this._shapePerDown4.graphics.lineTo(13*this.stage.stageWidth/24,27*this.stage.stageHeight/128),this._shapePerDown4.graphics.endFill(),this._LayerScene.addChild(this._shapePerDown4),this._shapePerDown4.visible=!1,this._bmpPerPress1||(this._bmpPerPress1=new egret.Bitmap);var s=RES.getRes("image_keyPress1_png");this._bmpPerPress1.texture=s,this._bmpPerPress1.x=29*this.stage.stageWidth/192-this._bmpPerPress1.width/2,this._bmpPerPress1.y=55*this.stage.stageHeight/64-this._bmpPerPress1.height/2,this._bmpPerPress1.visible=!1,this._LayerScene.addChild(this._bmpPerPress1),this._bmpPerPress2||(this._bmpPerPress2=new egret.Bitmap);var i=RES.getRes("image_keyPress2_png");this._bmpPerPress2.texture=i,this._bmpPerPress2.x=73*this.stage.stageWidth/192-this._bmpPerPress2.width/2,this._bmpPerPress2.y=55*this.stage.stageHeight/64-this._bmpPerPress2.height/2,this._bmpPerPress2.visible=!1,this._LayerScene.addChild(this._bmpPerPress2),this._bmpPerPress3||(this._bmpPerPress3=new egret.Bitmap);var r=RES.getRes("image_keyPress3_png");this._bmpPerPress3.texture=r,this._bmpPerPress3.x=119*this.stage.stageWidth/192-this._bmpPerPress3.width/2,this._bmpPerPress3.y=55*this.stage.stageHeight/64-this._bmpPerPress3.height/2,this._bmpPerPress3.visible=!1,this._LayerScene.addChild(this._bmpPerPress3),this._bmpPerPress4||(this._bmpPerPress4=new egret.Bitmap);var h=RES.getRes("image_keyPress4_png");this._bmpPerPress4.texture=h,this._bmpPerPress4.x=163*this.stage.stageWidth/192-this._bmpPerPress4.width/2,this._bmpPerPress4.y=55*this.stage.stageHeight/64-this._bmpPerPress4.height/2,this._bmpPerPress4.visible=!1,this._LayerScene.addChild(this._bmpPerPress4),this._rectClick1=new egret.Rectangle(0,3*this.stage.stageHeight/4,55*this.stage.stageWidth/192,this.stage.stageHeight/4),this._rectClick2=new egret.Rectangle(55*this.stage.stageWidth/192,3*this.stage.stageHeight/4,41*this.stage.stageWidth/192,this.stage.stageHeight/4),this._rectClick3=new egret.Rectangle(this.stage.stageWidth/2,3*this.stage.stageHeight/4,41*this.stage.stageWidth/192,this.stage.stageHeight/4),this._rectClick4=new egret.Rectangle(137*this.stage.stageWidth/192,3*this.stage.stageHeight/4,55*this.stage.stageWidth/192,this.stage.stageHeight/4),this._rectPerfect=new egret.Rectangle(0,27*this.stage.stageHeight/32,this.stage.stageWidth,this.stage.stageHeight/16),this._rectGreat=new egret.Rectangle(0,25*this.stage.stageHeight/32,this.stage.stageWidth,3*this.stage.stageHeight/16),this._rectMiss=new egret.Rectangle(0,3*this.stage.stageHeight/4,this.stage.stageWidth,this.stage.stageHeight/4),this._bmpSideLine||(this._bmpSideLine=new egret.Bitmap);var a=RES.getRes("image_sideline_png");this._bmpSideLine.texture=a,this._bmpSideLine.x=(this.stage.stageWidth-this._bmpSideLine.width)/2,this._bmpSideLine.y=(this.stage.stageHeight-this._bmpSideLine.height)/2,this._bmpSideLine.alpha=0,this._LayerScene.addChild(this._bmpSideLine),this._nTimeOutId1=egret.setTimeout(this.SidelineBlink,this,4e3),this._mfcScene1=new egret.MovieClipDataFactory(RES.getRes("movie_scene1_json"),RES.getRes("movie_scene1_png")),this._mfcScene2=new egret.MovieClipDataFactory(RES.getRes("movie_scene2_json"),RES.getRes("movie_scene2_png")),this._mcScene=new egret.MovieClip(this._mfcScene1.generateMovieClipData("scene1")),this._mcScene.addEventListener(egret.Event.COMPLETE,this.onSceneMcComplete,this),this._LayerScene.addChild(this._mcScene),this._mcScene.visible=!1,this._nTimeOutId2=egret.setTimeout(function(){this._mcScene.visible=!0,this._mcScene.play(1)},this,4e3),this._mfcPer=new egret.MovieClipDataFactory(RES.getRes("movie_per_json"),RES.getRes("movie_per_png")),this._mcPer1=new egret.MovieClip(this._mfcPer.generateMovieClipData("per")),this._mcPer1.addEventListener(egret.Event.COMPLETE,this.onPerMcComplete1,this),this._mcPer1.x=29*this.stage.stageWidth/192-125,this._mcPer1.y=55*this.stage.stageHeight/64-75,this._LayerUI.addChild(this._mcPer1),this._mcPer1.stop(),this._mcPer1.visible=!1,this._mcPer2=new egret.MovieClip(this._mfcPer.generateMovieClipData("per")),this._mcPer2.addEventListener(egret.Event.COMPLETE,this.onPerMcComplete2,this),this._mcPer2.x=73*this.stage.stageWidth/192-125,this._mcPer2.y=55*this.stage.stageHeight/64-75,this._LayerUI.addChild(this._mcPer2),this._mcPer2.stop(),this._mcPer2.visible=!1,this._mcPer3=new egret.MovieClip(this._mfcPer.generateMovieClipData("per")),this._mcPer3.addEventListener(egret.Event.COMPLETE,this.onPerMcComplete3,this),this._mcPer3.x=119*this.stage.stageWidth/192-125,this._mcPer3.y=55*this.stage.stageHeight/64-75,this._LayerUI.addChild(this._mcPer3),this._mcPer3.stop(),this._mcPer3.visible=!1,this._mcPer4=new egret.MovieClip(this._mfcPer.generateMovieClipData("per")),this._mcPer4.addEventListener(egret.Event.COMPLETE,this.onPerMcComplete4,this),this._mcPer4.x=163*this.stage.stageWidth/192-125,this._mcPer4.y=55*this.stage.stageHeight/64-75,this._LayerUI.addChild(this._mcPer4),this._mcPer4.stop(),this._mcPer4.visible=!1,this._bmpPerfect||(this._bmpPerfect=new egret.Bitmap);var n=RES.getRes("image_perfect_png");this._bmpPerfect.texture=n,this._bmpPerfect.visible=!1,this._LayerUI.addChild(this._bmpPerfect),this._bmpGreat||(this._bmpGreat=new egret.Bitmap);var o=RES.getRes("image_great_png");this._bmpGreat.texture=o,this._bmpGreat.visible=!1,this._LayerUI.addChild(this._bmpGreat),this._bmpMiss||(this._bmpMiss=new egret.Bitmap);var _=RES.getRes("image_miss_png");this._bmpMiss.texture=_,this._bmpMiss.visible=!1,this._LayerUI.addChild(this._bmpMiss),this._bmtextCombo||(this._bmtextCombo=new egret.BitmapText),this._bmtextCombo.font=RES.getRes("font_combo_fnt"),this._bmtextCombo.width=160,this._bmtextCombo.height=40,this._bmtextCombo.textAlign=egret.HorizontalAlign.CENTER,this._bmtextCombo.x=(this.stage.stageWidth-this._bmtextCombo.width)/2,this._bmtextCombo.y=69*this.stage.stageHeight/256-this._bmtextCombo.height/2,this._LayerUI.addChild(this._bmtextCombo),this._bmtextScore||(this._bmtextScore=new egret.BitmapText),this._bmtextScore.font=RES.getRes("font_score_fnt"),this._bmtextScore.width=240,this._bmtextScore.height=30,this._bmtextScore.textAlign=egret.HorizontalAlign.CENTER,this._bmtextScore.x=165*this.stage.stageWidth/192-this._bmtextScore.width/2,this._bmtextScore.y=5*this.stage.stageHeight/128-this._bmtextScore.height/2,this._LayerUI.addChild(this._bmtextScore),this._textPerNum||(this._textPerNum=new egret.TextField),this._textPerNum.size=60,this._textPerNum.bold=!0,this._textPerNum.textColor=16776960,this._textPerNum.x=this.stage.stageWidth-180,this._textPerNum.y=80,this._textPerNum.visible=!1,this._LayerUI.addChild(this._textPerNum),this._bmpScoreRate1||(this._bmpScoreRate1=new egret.Bitmap);var c=RES.getRes("image_double_png");this._bmpScoreRate1.texture=c,this._bmpScoreRate1.x=43*this.stage.stageWidth/48-this._bmpScoreRate1.width/2,this._bmpScoreRate1.y=this.stage.stageHeight/8-this._bmpScoreRate1.height/2,this._bmpScoreRate1.visible=!1,this._LayerUI.addChild(this._bmpScoreRate1),this._bmpScoreRate2||(this._bmpScoreRate2=new egret.Bitmap);var g=RES.getRes("image_triple_png");this._bmpScoreRate2.texture=g,this._bmpScoreRate2.x=43*this.stage.stageWidth/48-this._bmpScoreRate2.width/2,this._bmpScoreRate2.y=this.stage.stageHeight/8-this._bmpScoreRate2.height/2,this._bmpScoreRate2.visible=!1,this._LayerUI.addChild(this._bmpScoreRate2),this._bmpScoreRate3||(this._bmpScoreRate3=new egret.Bitmap);var p=RES.getRes("image_quadruple_png");this._bmpScoreRate3.texture=p,this._bmpScoreRate3.x=43*this.stage.stageWidth/48-this._bmpScoreRate3.width/2,this._bmpScoreRate3.y=this.stage.stageHeight/8-this._bmpScoreRate3.height/2,this._bmpScoreRate3.visible=!1,this._LayerUI.addChild(this._bmpScoreRate3),this._btnReturn||(this._btnReturn=new MyButton),this._btnReturn.SetResource("image_return_png","image_return_png",this.onReturnTouch),this._btnReturn.x=this.stage.stageWidth-this._btnReturn.width,this._LayerUI.addChild(this._btnReturn),this._soundReady||(this._soundReady=RES.getRes("sound_ready_wav")),this._channelReady=this._soundReady.play(0,1),this._soundGame||(this._soundGame=RES.getRes("sound_game_mp3")),this._channelGame=this._soundGame.play(0,1),this._channelGame.addEventListener(egret.Event.SOUND_COMPLETE,this.onGameSoundComplete,this),this._nTimeFlag=egret.getTimer(),egret.startTick(this.timerFunc,this)},t.prototype.GetTouchPathWay=function(e,t){return this._rectClick1.contains(e,t)?1:this._rectClick2.contains(e,t)?2:this._rectClick3.contains(e,t)?3:this._rectClick4.contains(e,t)?4:0},t.prototype.GetKeyPathWay=function(e){var t=0;switch(e){case"KeyD":t=1;break;case"KeyF":t=2;break;case"KeyJ":t=3;break;case"KeyK":t=4}return t},t.prototype.GetScoreCheckID=function(e){var t=0;if(e){var s=e.height*e.scaleY/2+e.y;s>=this._rectPerfect.top&&s<=this._rectPerfect.bottom?t=1:s>=this._rectGreat.top&&s<=this._rectGreat.bottom?t=2:s>=this._rectMiss.top&&s<=this._rectMiss.bottom&&(t=3),t>0&&(NoteManager.getInstance().HideNote(e),this.PlayPerMc(e.nPathWay))}return t>0&&this.ShowScoreCheck(t),t},t.prototype.ShowScoreCheck=function(e){3>e?this._nCurCombo++:this._nCurCombo=0,this._bmtextCombo&&(this._nCurCombo>0?this._bmtextCombo.text=""+this._nCurCombo:this._bmtextCombo.text=""),this._nCurCombo>=GameConst.DOUBLE_SCORE_NUM?this._nCurCombo==GameConst.DOUBLE_SCORE_NUM?(this._nScoreRate=2,this._bmpScoreRate1.visible=!0,this._bmpScoreRate2.visible=!1,this._bmpScoreRate3.visible=!1):this._nCurCombo==GameConst.TRIPLE_SCORE_NUM?(this._nScoreRate=3,this._bmpScoreRate1.visible=!1,this._bmpScoreRate2.visible=!0,this._bmpScoreRate3.visible=!1):this._nCurCombo==GameConst.QUADRUPLE_SCORE_NUM&&(this._nScoreRate=4,this._bmpScoreRate1.visible=!1,this._bmpScoreRate2.visible=!1,this._bmpScoreRate3.visible=!0):(this._nScoreRate=1,this._bmpScoreRate1.visible=!1,this._bmpScoreRate2.visible=!1,this._bmpScoreRate3.visible=!1);var t,s=0;if(1==e?(t=this._bmpPerfect,s=GameConst.PERFECT_SCORE):2==e?(t=this._bmpGreat,s=GameConst.GREAT_SCORE):3==e&&(t=this._bmpMiss),t){egret.Tween.removeTweens(t),t.scaleX=t.scaleY=1,t.x=(this.stage.stageWidth-t.width)/2,t.y=23*this.stage.stageHeight/128-t.height/2,t.visible=!0;var i=t.x+9*t.width/20,r=t.y+9*t.height/20;egret.Tween.get(t).to({x:i,y:r,scaleX:.1,scaleY:.1},200).call(this.removeScoreCheck,this,[t])}this._nScore+=this._nScoreRate*s,this._bmtextScore&&(this._bmtextScore.text=""+this._nScore),this._nPerNum++,this._textPerNum&&(this._textPerNum.text=""+this._nPerNum)},t.prototype.removeScoreCheck=function(e){e.visible=!1},t.prototype.PlayPerMc=function(e){switch(Math.floor(e)){case 1:this._mcPer1.visible=!0,this._mcPer1.gotoAndPlay(1,1);break;case 2:this._mcPer2.visible=!0,this._mcPer2.gotoAndPlay(1,1);break;case 3:this._mcPer3.visible=!0,this._mcPer3.gotoAndPlay(1,1);break;case 4:this._mcPer4.visible=!0,this._mcPer4.gotoAndPlay(1,1)}},t.prototype.TouchBeginHandler=function(e){if(e>0){var t=10*e,s=10*e+1,i=NoteManager.getInstance().objShow;if(i){var r=i[t],h=i[s];if(r&&r.length>0)for(var a=0;a<r.length;++a){var n=r[a];this.GetScoreCheckID(n)}if(h&&h.length>0)for(var o=0;o<h.length;++o){var _=h[o];this.GetScoreCheckID(_)}}switch(e){case 1:this._bPerDown1=!0,this._bmpPerPress1.visible=!0,this._shapePerDown1.visible=!0;break;case 2:this._bPerDown2=!0,this._bmpPerPress2.visible=!0,this._shapePerDown2.visible=!0;break;case 3:this._bPerDown3=!0,this._bmpPerPress3.visible=!0,this._shapePerDown3.visible=!0;break;case 4:this._bPerDown4=!0,this._bmpPerPress4.visible=!0,this._shapePerDown4.visible=!0}}},t.prototype.TouchPressHandler=function(){var e=NoteManager.getInstance().objShow;if(e){if(this._bPerDown1){var t=e[12],s=e[13];if(t&&t.length>0)for(var i=0;i<t.length;++i){var r=t[i],h=r.height*r.scaleY/2+r.y;h>=this._rectPerfect.top&&h<=this._rectPerfect.bottom&&this.GetScoreCheckID(r)}if(s&&s.length>0)for(var a=0;a<s.length;++a){var n=s[a],o=n.height*n.scaleY/2+n.y;o>=this._rectPerfect.top&&o<=this._rectPerfect.bottom&&this.GetScoreCheckID(n)}}if(this._bPerDown2){var _=e[22],c=e[23];if(_&&_.length>0)for(var g=0;g<_.length;++g){var p=_[g],m=p.height*p.scaleY/2+p.y;m>=this._rectPerfect.top&&m<=this._rectPerfect.bottom&&this.GetScoreCheckID(p)}if(c&&c.length>0)for(var l=0;l<c.length;++l){var v=c[l],b=v.height*v.scaleY/2+v.y;b>=this._rectPerfect.top&&b<=this._rectPerfect.bottom&&this.GetScoreCheckID(v)}}if(this._bPerDown3){var S=e[32],P=e[33];if(S&&S.length>0)for(var d=0;d<S.length;++d){var E=S[d],u=E.height*E.scaleY/2+E.y;u>=this._rectPerfect.top&&u<=this._rectPerfect.bottom&&this.GetScoreCheckID(E)}if(P&&P.length>0)for(var R=0;R<P.length;++R){var D=P[R],y=D.height*D.scaleY/2+D.y;y>=this._rectPerfect.top&&y<=this._rectPerfect.bottom&&this.GetScoreCheckID(D)}}if(this._bPerDown4){var C=e[42],w=e[43];if(C&&C.length>0)for(var T=0;T<C.length;++T){var f=C[T],M=f.height*f.scaleY/2+f.y;M>=this._rectPerfect.top&&M<=this._rectPerfect.bottom&&this.GetScoreCheckID(f)}if(w&&w.length>0)for(var L=0;L<w.length;++L){var O=w[L],G=O.height*O.scaleY/2+O.y;G>=this._rectPerfect.top&&G<=this._rectPerfect.bottom&&this.GetScoreCheckID(O)}}}},t.prototype.TouchEndHandler=function(e){switch(e){case 1:this._bPerDown1=!1,this._bmpPerPress1.visible=!1,this._shapePerDown1.visible=!1;break;case 2:this._bPerDown2=!1,this._bmpPerPress2.visible=!1,this._shapePerDown2.visible=!1;break;case 3:this._bPerDown3=!1,this._bmpPerPress3.visible=!1,this._shapePerDown3.visible=!1;break;case 4:this._bPerDown4=!1,this._bmpPerPress4.visible=!1,this._shapePerDown4.visible=!1}},t.prototype.onGameTouch=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:var t=this.GetTouchPathWay(e.localX,e.localY);this.TouchBeginHandler(t);break;case egret.TouchEvent.TOUCH_END:var s=this.GetTouchPathWay(e.localX,e.localY);this.TouchEndHandler(s)}},t.prototype.onGameTouchMove=function(e){if(e.localX>20&&e.localX<this.stage.stageWidth-20&&e.localY>3*this.stage.stageHeight/4&&e.localY<this.stage.stageHeight-20){var t=this.GetTouchPathWay(e.localX,e.localY);switch(t){case 1:this._bPerDown1||(this._bmpPerPress1.visible=!0,this._shapePerDown1.visible=!0),this._bPerDown1=!0,this._bPerDown2&&(this._bPerDown2=!1,this._bmpPerPress2.visible=!1,this._shapePerDown2.visible=!1),this._bPerDown3&&(this._bPerDown3=!1,this._bmpPerPress3.visible=!1,this._shapePerDown3.visible=!1),this._bPerDown4&&(this._bPerDown4=!1,this._bmpPerPress4.visible=!1,this._shapePerDown4.visible=!1);break;case 2:this._bPerDown2||(this._bmpPerPress2.visible=!0,this._shapePerDown2.visible=!0),this._bPerDown2=!0,this._bPerDown1&&(this._bPerDown1=!1,this._bmpPerPress1.visible=!1,this._shapePerDown1.visible=!1),this._bPerDown3&&(this._bPerDown3=!1,this._bmpPerPress3.visible=!1,this._shapePerDown3.visible=!1),this._bPerDown4&&(this._bPerDown4=!1,this._bmpPerPress4.visible=!1,this._shapePerDown4.visible=!1);break;case 3:this._bPerDown3||(this._bmpPerPress3.visible=!0,this._shapePerDown3.visible=!0),this._bPerDown3=!0,this._bPerDown1&&(this._bPerDown1=!1,this._bmpPerPress1.visible=!1,this._shapePerDown1.visible=!1),this._bPerDown2&&(this._bPerDown2=!1,this._bmpPerPress2.visible=!1,this._shapePerDown2.visible=!1),this._bPerDown4&&(this._bPerDown4=!1,this._bmpPerPress4.visible=!1,this._shapePerDown4.visible=!1);break;case 4:this._bPerDown4||(this._bmpPerPress4.visible=!0,this._shapePerDown4.visible=!0),this._bPerDown4=!0,this._bPerDown1&&(this._bPerDown1=!1,this._bmpPerPress1.visible=!1,this._shapePerDown1.visible=!1),this._bPerDown2&&(this._bPerDown2=!1,this._bmpPerPress2.visible=!1,this._shapePerDown2.visible=!1),this._bPerDown3&&(this._bPerDown3=!1,this._bmpPerPress3.visible=!1,this._shapePerDown3.visible=!1)}}else this._bPerDown1&&(this._bPerDown1=!1,this._bmpPerPress1.visible=!1,this._shapePerDown1.visible=!1),this._bPerDown2&&(this._bPerDown2=!1,this._bmpPerPress2.visible=!1,this._shapePerDown2.visible=!1),this._bPerDown3&&(this._bPerDown3=!1,this._bmpPerPress3.visible=!1,this._shapePerDown3.visible=!1),this._bPerDown4&&(this._bPerDown4=!1,this._bmpPerPress4.visible=!1,this._shapePerDown4.visible=!1)},t.prototype.OnKeyDown=function(e){var t=e.code,s=this.GetKeyPathWay(t);this.TouchBeginHandler(s)},t.prototype.OnKeyUp=function(e){var t=e.code,s=this.GetKeyPathWay(t);this.TouchEndHandler(s)},t.prototype.timerFunc=function(e){this._nGameTime=e-this._nTimeFlag;for(var t,s,i,r=ConfigManager.getInstance()._arrBorn;this._nNoteIndex<r.length&&this._nGameTime>=r[this._nNoteIndex].time;){t=r[this._nNoteIndex].time,s=r[this._nNoteIndex].track,i=r[this._nNoteIndex].type,this._nNoteIndex++;
var h=NoteManager.getInstance().GetNote(t,s,i);h.scaleX=h.scaleY=.2,h.x=19*this.stage.stageWidth/48+this.stage.stageWidth*s/24-23,h.y=27*this.stage.stageHeight/128;var a;1==s?a=17*this.stage.stageWidth/192-114:2==s?a=23*this.stage.stageWidth/64-114:3==s?a=41*this.stage.stageWidth/64-114:4==s&&(a=175*this.stage.stageWidth/192-114),this._LayerNote.addChild(h),egret.Tween.get(h).to({x:a,y:this.stage.stageHeight-42,scaleX:1,scaleY:1},GameConst.NOTE_FLY_TIME,egret.Ease.sineIn).call(this.removeNote,this,[h])}return this.TouchPressHandler(),!1},t.prototype.removeNote=function(e){NoteManager.getInstance().HideNote(e),this.ShowScoreCheck(3)},t.prototype.SidelineBlink=function(){this._bmpSideLine&&(0==this._bmpSideLine.alpha?egret.Tween.get(this._bmpSideLine).to({alpha:1},500).call(this.SidelineBlink,this):1==this._bmpSideLine.alpha&&egret.Tween.get(this._bmpSideLine).to({alpha:0},500).call(this.SidelineBlink,this))},t.prototype.onSceneMcComplete=function(e){var t=this._mcScene.currentLabel;switch(t){case"scene1":this._mcScene.movieClipData=this._mfcScene2.generateMovieClipData("scene2"),this._mcScene.play(1);break;case"scene2":this._mcScene.movieClipData=this._mfcScene1.generateMovieClipData("scene1"),this._mcScene.play(1)}},t.prototype.onPerMcComplete1=function(e){this._mcPer1.stop(),this._mcPer1.visible=!1},t.prototype.onPerMcComplete2=function(e){this._mcPer2.stop(),this._mcPer2.visible=!1},t.prototype.onPerMcComplete3=function(e){this._mcPer3.stop(),this._mcPer3.visible=!1},t.prototype.onPerMcComplete4=function(e){this._mcPer4.stop(),this._mcPer4.visible=!1},t.prototype.onGameSoundComplete=function(e){egret.stopTick(this.timerFunc,this),egret.clearTimeout(this._nTimeOutId1),this._bmpSideLine.alpha=0,this._mcScene.stop(),this._mcScene.removeEventListener(egret.Event.COMPLETE,this.onSceneMcComplete,this),this._mcScene&&this._mcScene.parent&&this._mcScene.parent.removeChild(this._mcScene)},t.prototype.onReturnTouch=function(e){EventManager.getInstance().dispatchEvent(new egret.Event(DataEvent.EVENT_SHOW_START))},t.prototype.Clear=function(){this._mcScene.stop(),this._mcScene.removeEventListener(egret.Event.COMPLETE,this.onSceneMcComplete,this),this._mcScene&&this._mcScene.parent&&this._mcScene.parent.removeChild(this._mcScene),this._channelReady&&(this._channelReady.stop(),this._channelReady=null),this._channelGame&&(this._channelGame.removeEventListener(egret.Event.SOUND_COMPLETE,this.onGameSoundComplete,this),this._channelGame.stop(),this._channelGame=null),this._mcPer1.stop(),this._mcPer1.removeEventListener(egret.Event.COMPLETE,this.onPerMcComplete1,this),this._mcPer1&&this._mcPer1.parent&&this._mcPer1.parent.removeChild(this._mcPer1),this._mcPer2.stop(),this._mcPer2.removeEventListener(egret.Event.COMPLETE,this.onPerMcComplete2,this),this._mcPer2&&this._mcPer2.parent&&this._mcPer2.parent.removeChild(this._mcPer2),this._mcPer3.stop(),this._mcPer3.removeEventListener(egret.Event.COMPLETE,this.onPerMcComplete3,this),this._mcPer3&&this._mcPer3.parent&&this._mcPer3.parent.removeChild(this._mcPer3),this._mcPer4.stop(),this._mcPer4.removeEventListener(egret.Event.COMPLETE,this.onPerMcComplete4,this),this._mcPer4&&this._mcPer4.parent&&this._mcPer4.parent.removeChild(this._mcPer4),egret.stopTick(this.timerFunc,this),NoteManager.getInstance().HideAllNote(),this._LayerScene=null,this._LayerNote=null,this._LayerUI=null,this._bmpBg=null,this._bmpPerBg=null,this._bmpPerPress1=null,this._bmpPerPress2=null,this._bmpPerPress3=null,this._bmpPerPress4=null,this._bmpSideLine=null,egret.clearTimeout(this._nTimeOutId1),this._mfcScene1=null,this._mfcScene2=null,this._mcScene=null,this._mfcPer=null,this._mcPer1=null,this._mcPer2=null,this._mcPer3=null,this._mcPer4=null,egret.clearTimeout(this._nTimeOutId2),this._bmpPerfect=null,this._bmpGreat=null,this._bmpMiss=null,this._bmtextCombo=null,this._bmtextScore=null,this._textPerNum=null,this._bmpScoreRate1=null,this._bmpScoreRate2=null,this._bmpScoreRate3=null,this._btnReturn=null,this._soundReady=null,this._soundGame=null,this._shapePerDown1.graphics.clear(),this._shapePerDown1=null,this._shapePerDown2.graphics.clear(),this._shapePerDown2=null,this._shapePerDown3.graphics.clear(),this._shapePerDown3=null,this._shapePerDown4.graphics.clear(),this._shapePerDown4=null,this._rectClick1=null,this._rectClick2=null,this._rectClick3=null,this._rectClick4=null,this._rectPerfect=null,this._rectGreat=null,this._rectMiss=null},t}(egret.DisplayObjectContainer);__reflect(GamePanel.prototype,"GamePanel");var MoviePanel=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.UpdateShow()},t.prototype.onRemoveFromStage=function(e){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.Clear()},t.prototype.UpdateShow=function(){this.InitMovie(),this._mcStart=new egret.MovieClip(this._mfcStart1.generateMovieClipData("start1")),this._mcStart.addEventListener(egret.Event.COMPLETE,this.onStartMcComplete,this),this.addChild(this._mcStart),this._mcStart.play(1),this._soundCheer||(this._soundCheer=RES.getRes("sound_cheer_mp3")),this._channelCheer=this._soundCheer.play(0,1),this._soundLight||(this._soundLight=RES.getRes("sound_light_mp3")),this._channelLight=this._soundLight.play(0,1)},t.prototype.InitMovie=function(){this._mfcStart1=new egret.MovieClipDataFactory(RES.getRes("movie_start1_json"),RES.getRes("movie_start1_png")),this._mfcStart2=new egret.MovieClipDataFactory(RES.getRes("movie_start2_json"),RES.getRes("movie_start2_png")),this._mfcStart3=new egret.MovieClipDataFactory(RES.getRes("movie_start3_json"),RES.getRes("movie_start3_png")),this._mfcStart4=new egret.MovieClipDataFactory(RES.getRes("movie_start4_json"),RES.getRes("movie_start4_png")),this._mfcStart5=new egret.MovieClipDataFactory(RES.getRes("movie_start5_json"),RES.getRes("movie_start5_png")),this._mfcStart6=new egret.MovieClipDataFactory(RES.getRes("movie_start6_json"),RES.getRes("movie_start6_png")),this._mfcStart7=new egret.MovieClipDataFactory(RES.getRes("movie_start7_json"),RES.getRes("movie_start7_png")),this._mfcStart8=new egret.MovieClipDataFactory(RES.getRes("movie_start8_json"),RES.getRes("movie_start8_png")),this._mfcStart9=new egret.MovieClipDataFactory(RES.getRes("movie_start9_json"),RES.getRes("movie_start9_png")),this._mfcStart10=new egret.MovieClipDataFactory(RES.getRes("movie_start10_json"),RES.getRes("movie_start10_png"))},t.prototype.onStartMcComplete=function(e){var t=this._mcStart.currentLabel;switch(t){case"start1":this._mcStart.movieClipData=this._mfcStart1.generateMovieClipData("start2"),this._mcStart.play(1);break;case"start2":this._mcStart.movieClipData=this._mfcStart1.generateMovieClipData("start3"),this._mcStart.play(1);break;case"start3":this._mcStart.movieClipData=this._mfcStart1.generateMovieClipData("start4"),this._mcStart.play(1);break;case"start4":this._mcStart.movieClipData=this._mfcStart1.generateMovieClipData("start5"),this._mcStart.play(1);break;case"start5":this._mcStart.movieClipData=this._mfcStart1.generateMovieClipData("start6"),this._mcStart.play(1);break;case"start6":this._mcStart.movieClipData=this._mfcStart2.generateMovieClipData("start7"),this._mcStart.play(1);break;case"start7":this._mcStart.movieClipData=this._mfcStart3.generateMovieClipData("start8"),this._mcStart.play(1);break;case"start8":this._mcStart.movieClipData=this._mfcStart3.generateMovieClipData("start9"),this._mcStart.play(1);break;case"start9":this._mcStart.movieClipData=this._mfcStart3.generateMovieClipData("start10"),this._mcStart.play(1);break;case"start10":this._mcStart.movieClipData=this._mfcStart4.generateMovieClipData("start11"),this._mcStart.play(1);break;case"start11":this._mcStart.movieClipData=this._mfcStart5.generateMovieClipData("start12"),this._mcStart.play(1);break;case"start12":this._mcStart.movieClipData=this._mfcStart6.generateMovieClipData("start13"),this._mcStart.play(1);break;case"start13":this._mcStart.movieClipData=this._mfcStart7.generateMovieClipData("start14"),this._mcStart.play(1);break;case"start14":this._mcStart.movieClipData=this._mfcStart8.generateMovieClipData("start15"),this._mcStart.play(1);break;case"start15":this._mcStart.movieClipData=this._mfcStart9.generateMovieClipData("start16"),this._mcStart.play(1);break;case"start16":this._mcStart.movieClipData=this._mfcStart10.generateMovieClipData("start17"),this._mcStart.play(1);break;case"start17":EventManager.getInstance().dispatchEvent(new DataEvent(DataEvent.EVENT_SHOW_GAME))}},t.prototype.Clear=function(){this._mcStart.stop(),this._mcStart.removeEventListener(egret.Event.COMPLETE,this.onStartMcComplete,this),this._channelCheer&&(this._channelCheer.stop(),this._channelCheer=null),this._channelLight&&(this._channelLight.stop(),this._channelLight=null),this._mfcStart1=null,this._mfcStart2=null,this._mfcStart3=null,this._mfcStart4=null,this._mfcStart5=null,this._mfcStart6=null,this._mfcStart7=null,this._mfcStart8=null,this._mfcStart9=null,this._mfcStart10=null,this._mcStart=null},t}(egret.DisplayObjectContainer);__reflect(MoviePanel.prototype,"MoviePanel");var StartPanel=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.UpdateShow()},t.prototype.onRemoveFromStage=function(e){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this),this.Clear()},t.prototype.UpdateShow=function(){this._bmpBg||(this._bmpBg=new egret.Bitmap);var e=RES.getRes("image_startBg_jpg");this._bmpBg.texture=e,this.addChild(this._bmpBg),this._btnStart||(this._btnStart=new MyButton),this._btnStart.SetResource("image_start1_png","image_start2_png",this.onTouch),this._btnStart.x=this.stage.stageWidth/16,this._btnStart.y=this.stage.stageHeight/2,this.addChild(this._btnStart),this._soundGame||(this._soundGame=RES.getRes("sound_start_mp3")),this._channelGame=this._soundGame.play()},t.prototype.onTouch=function(e){EventManager.getInstance().dispatchEvent(new DataEvent(DataEvent.EVENT_SHOW_START_MOVIE))},t.prototype.Clear=function(){this._channelGame&&(this._channelGame.stop(),this._channelGame=null),this._bmpBg=null,this._btnStart=null,this._soundGame=null},t}(egret.DisplayObjectContainer);__reflect(StartPanel.prototype,"StartPanel");